<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ö–æ–º–∞–Ω–¥ (–í–æ–ª–µ–π–±–æ–ª)</title>
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ (CSS) */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            padding: 20px;
            margin: 0;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
        }

        h2 { text-align: center; color: #2c3e50; }

        /* –°—Ç–∏–ª–∏ —Ñ–æ—Ä–º—ã –≤–≤–æ–¥–∞ */
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        input, select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }

        input { flex: 2; } /* –ò–º—è –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ */
        select { flex: 1; }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.2s;
        }

        .btn-add { background-color: #27ae60; color: white; }
        .btn-add:hover { background-color: #219150; }

        .btn-gen { 
            background-color: #3498db; 
            color: white; 
            width: 100%; 
            margin-top: 20px;
            padding: 15px;
        }
        .btn-gen:hover { background-color: #2980b9; }

        /* –¢–∞–±–ª–∏—Ü–∞ –∏–≥—Ä–æ–∫–æ–≤ */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            text-align: left;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        th { background-color: #f8f9fa; color: #555; }

        .level-strong { color: #e74c3c; font-weight: bold; }
        .level-mid { color: #f39c12; font-weight: bold; }
        .level-weak { color: #27ae60; font-weight: bold; }

        .delete-btn {
            color: red;
            cursor: pointer;
            font-weight: bold;
            text-align: center;
        }

        /* –ë–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        #results { margin-top: 30px; }
        
        .team-card {
            background: #eef2f5;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 5px solid #34495e;
        }
        
        .team-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; display: flex; justify-content: space-between; }
        .team-score { font-size: 14px; color: #7f8c8d; font-weight: normal; }
    </style>
</head>
<body>

<div class="container">
    <h2>üèê –í–æ–ª–µ–π–±–æ–ª: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ö–æ–º–∞–Ω–¥</h2>
    
    <div class="input-group">
        <input type="text" id="playerName" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞">
        <select id="playerSkill">
            <option value="3">–°–∏–ª—å–Ω—ã–π</option>
            <option value="2">–°—Ä–µ–¥–Ω–∏–π</option>
            <option value="1">–°–ª–∞–±—ã–π</option>
        </select>
        <button class="btn-add" onclick="addPlayer()">+</button>
    </div>

    <div id="playerCount">–ò–≥—Ä–æ–∫–æ–≤: 0</div>
    <table>
        <thead>
            <tr>
                <th>–ò–º—è</th>
                <th>–£—Ä–æ–≤–µ–Ω—å</th>
                <th>–£–¥–∞–ª–∏—Ç—å</th>
            </tr>
        </thead>
        <tbody id="playerList">
            </tbody>
    </table>

    <button class="btn-gen" onclick="generateTeams()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ö–æ–º–∞–Ω–¥—ã</button>

    <div id="results"></div>
</div>

<script>
    // --- JavaScript –õ–æ–≥–∏–∫–∞ ---
    
    let players = [];

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
    function addPlayer() {
        const nameInput = document.getElementById('playerName');
        const skillInput = document.getElementById('playerSkill');
        const name = nameInput.value.trim();
        const skill = parseInt(skillInput.value);

        if (name === "") {
            alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–≥—Ä–æ–∫–∞!");
            return;
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∞—Å—Å–∏–≤
        players.push({ name: name, skill: skill });
        
        // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
        nameInput.value = "";
        nameInput.focus();
        
        renderList();
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
    function removePlayer(index) {
        players.splice(index, 1);
        renderList();
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞
    function renderList() {
        const list = document.getElementById('playerList');
        const countDiv = document.getElementById('playerCount');
        list.innerHTML = "";
        
        players.forEach((player, index) => {
            let skillText = "";
            let skillClass = "";
            
            if(player.skill === 3) { skillText = "–°–∏–ª—å–Ω—ã–π"; skillClass = "level-strong"; }
            else if(player.skill === 2) { skillText = "–°—Ä–µ–¥–Ω–∏–π"; skillClass = "level-mid"; }
            else { skillText = "–°–ª–∞–±—ã–π"; skillClass = "level-weak"; }

            list.innerHTML += `
                <tr>
                    <td>${player.name}</td>
                    <td class="${skillClass}">${skillText}</td>
                    <td class="delete-btn" onclick="removePlayer(${index})">‚úï</td>
                </tr>
            `;
        });
        
        countDiv.innerText = `–ò–≥—Ä–æ–∫–æ–≤: ${players.length}`;
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
    function generateTeams() {
        if (players.length < 2) {
            alert("–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞!");
            return;
        }

        // 1. –°–æ—Ä—Ç–∏—Ä—É–µ–º –∏–≥—Ä–æ–∫–æ–≤ –æ—Ç —Å–∏–ª—å–Ω–æ–≥–æ –∫ —Å–ª–∞–±–æ–º—É
        // –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ "–∑–º–µ–π–∫–∞"
        const sortedPlayers = [...players].sort((a, b) => b.skill - a.skill);

        // 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥
        let teamCount = 2;
        if (players.length > 12) {
            // –ï—Å–ª–∏ –±–æ–ª—å—à–µ 12, –¥–µ–ª–∏–º –Ω–∞ 6 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞) –∏ –æ–∫—Ä—É–≥–ª—è–µ–º –≤–≤–µ—Ä—Ö
            // –ù–∞–ø—Ä–∏–º–µ—Ä, 13 —á–µ–ª / 6 = 2.16 -> 3 –∫–æ–º–∞–Ω–¥—ã
            teamCount = Math.ceil(players.length / 6);
        }

        // –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã –¥–ª—è –∫–æ–º–∞–Ω–¥
        let teams = Array.from({ length: teamCount }, () => []);
        let teamScores = new Array(teamCount).fill(0);

        // 3. –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–≥—Ä–æ–∫–æ–≤ (–ñ–∞–¥–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º + –ó–º–µ–π–∫–∞)
        // –ú—ã –∫–ª–∞–¥–µ–º —Å–∞–º–æ–≥–æ —Å–∏–ª—å–Ω–æ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ —Ç—É –∫–æ–º–∞–Ω–¥—É, –≥–¥–µ —Å–µ–π—á–∞—Å –º–µ–Ω—å—à–µ –≤—Å–µ–≥–æ —Å—É–º–º–∞ —Å–∫–∏–ª–ª–æ–≤
        // –ï—Å–ª–∏ —Å—É–º–º—ã —Ä–∞–≤–Ω—ã, —Ç–æ —Ç—É–¥–∞, –≥–¥–µ –º–µ–Ω—å—à–µ –ª—é–¥–µ–π
        
        sortedPlayers.forEach(player => {
            // –ù–∞—Ö–æ–¥–∏–º –∫–æ–º–∞–Ω–¥—É —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –æ–±—â–∏–º —Å–∫–∏–ª–ª–æ–º
            let minScore = Infinity;
            let targetTeamIndex = 0;

            // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –∏ –∏—â–µ–º "—Å–∞–º—É—é —Å–ª–∞–±—É—é" –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
            for (let i = 0; i < teamCount; i++) {
                // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å–Ω–∞—á–∞–ª–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ 7 –ø—Ä–æ—Ç–∏–≤ 5), –ø–æ—Ç–æ–º —Å–∏–ª—É
                if (teams[i].length < teams[targetTeamIndex].length) {
                    targetTeamIndex = i;
                    break; // –ù–∞—à–ª–∏ –∫–æ–º–∞–Ω–¥—É –≥–¥–µ –º–µ–Ω—å—à–µ –ª—é–¥–µ–π, –¥–æ–±–∞–≤–ª—è–µ–º —Ç—É–¥–∞
                }
                
                // –ï—Å–ª–∏ –ª—é–¥–µ–π –ø–æ—Ä–æ–≤–Ω—É, —Å–º–æ—Ç—Ä–∏–º –ø–æ —Å–∏–ª–µ
                if (teamScores[i] < minScore && teams[i].length <= teams[targetTeamIndex].length) {
                    minScore = teamScores[i];
                    targetTeamIndex = i;
                }
            }

            teams[targetTeamIndex].push(player);
            teamScores[targetTeamIndex] += player.skill;
        });

        // 4. –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = "<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∂–µ—Ä–µ–±—å–µ–≤–∫–∏:</h3>";

        teams.forEach((team, index) => {
            const teamNames = team.map(p => p.name).join(', ');
            // –ü–æ–¥—Å—á–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ–π —Å–∏–ª—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            let totalPower = teamScores[index]; 
            
            resultsDiv.innerHTML += `
                <div class="team-card">
                    <div class="team-title">
                        –ö–æ–º–∞–Ω–¥–∞ ${index + 1}
                        <span class="team-score">–°–∏–ª–∞: ${totalPower}</span>
                    </div>
                    <div>${teamNames}</div>
                </div>
            `;
        });
    }
</script>

</body>
</html>